<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>极简物品清单</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="logo">📦 物存.Storage</div>
        <div class="header-btns">
            <button onclick="openItemModal()">+ 新增物品</button>
            <button onclick="openAdminModal()">后台配置</button>
        </div>
    </header>

    <div class="main-layout">
        <aside class="side-nav" id="sideNav"></aside>
        <main class="content-view">
            <nav class="sub-nav" id="subNav"></nav>
            <div class="item-grid" id="itemGrid"></div>
        </main>
    </div>

    <div id="itemModal" class="modal">
        <div class="modal-card">
            <h3>物品信息登记</h3>
            <form id="itemForm">
                <input type="hidden" id="editItemId">
                <div class="form-section">
                    <label class="form-label">物品名称</label>
                    <input type="text" name="name" id="formName" required placeholder="输入物品全名">
                </div>
                
                <div class="form-row"> <div><label class="form-label">主分类</label><select id="sel1" name="cat1" required></select></div>
                    <div><label class="form-label">子分类</label><select id="sel2" name="cat2"></select></div>
                </div>

                <div class="form-row"> <div><label class="form-label">规格</label><input type="text" name="spec" id="formSpec" placeholder="100ml / 大号"></div>
                    <div><label class="form-label">数量</label><input type="number" name="quantity" id="formQty" value="1"></div>
                </div>

                <div class="form-row"> <div><label class="form-label">图片 URL</label><input type="url" name="imageUrl" id="formImg"></div>
                    <div><label class="form-label">备注</label><input type="text" name="notes" id="formNotes"></div>
                </div>

                <div class="form-section">
                    <label class="form-label">存放位置 (一行3列)</label>
                    <div class="loc-container">
                        <div id="locationCheckList" class="loc-grid"></div>
                    </div>
                </div>

                <div style="display:flex; gap:12px; margin-top:20px">
                    <button type="button" onclick="toggleModal('itemModal', false)" style="flex:1; background:#eee; border:none; padding:10px; border-radius:10px; cursor:pointer">取消</button>
                    <button type="submit" style="flex:2; background:var(--primary); color:#fff; border:none; padding:10px; border-radius:10px; cursor:pointer; font-weight:700">保存登记</button>
                </div>
            </form>
        </div>
    </div>

    <div id="adminModal" class="modal">
        <div class="modal-card" style="width: 420px;">
            <div class="tab-bar">
                <button onclick="switchTab('cat')" id="tabCat" class="active">分类管理</button>
                <button onclick="switchTab('loc')" id="tabLoc">位置管理</button>
            </div>
            
            <div id="catPanel">
                <div style="display:flex; gap:8px; margin-bottom:10px">
                    <input type="text" id="newCatName" placeholder="新分类" style="flex:2">
                    <select id="newCatLevel" onchange="updateParentOptions()" style="flex:1">
                        <option value="1">一级</option><option value="2">二级</option>
                    </select>
                </div>
                <select id="parentSelect" style="display:none; margin-bottom:10px"></select>
                <button onclick="handleAddCategory()" class="btn-primary-block" style="background:var(--primary); color:#fff; border:none; padding:10px; width:100%; border-radius:10px; cursor:pointer">确认添加</button>
                <div id="catList" class="mgr-list"></div>
            </div>

            <div id="locPanel" style="display:none">
                <input type="text" id="newLocName" placeholder="新位置名称" style="margin-bottom:10px">
                <button onclick="handleAddLocation()" class="btn-primary-block" style="background:var(--primary); color:#fff; border:none; padding:10px; width:100%; border-radius:10px; cursor:pointer">保存位置</button>
                <div id="locList" class="mgr-list"></div>
            </div>

            <div style="text-align: center; margin-top: 15px;"><button onclick="toggleModal('adminModal', false)" style="background:none; border:none; color:#999; cursor:pointer">关闭</button></div>
        </div>
    </div>
    <script src="app.js"></script>
</body>
</html>